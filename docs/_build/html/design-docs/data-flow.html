
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Data Flow &#8212; mewbot 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Vision" href="vision.html" />
    <link rel="prev" title="Data Storage" href="data.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!--
SPDX-FileCopyrightText: 2021 - 2023 Mewbot Developers <mewbot@quicksilver.london>

SPDX-License-Identifier: CC-BY-4.0
--><section id="data-flow">
<h1>Data Flow<a class="headerlink" href="#data-flow" title="Permalink to this heading">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Input</span>                             <span class="n">Behaviour</span>
                    <span class="n">Processor</span>                               <span class="n">Processor</span>      <span class="n">Output</span>
          <span class="n">Input</span>                                  <span class="n">Output</span>
<span class="n">Input</span>     <span class="n">Event</span>                   <span class="n">Behaviour</span>      <span class="n">Event</span>
          <span class="n">Queue</span>                                  <span class="n">Queue</span>
                    <span class="n">Processor</span>
<span class="n">Input</span>                             <span class="n">Behaviour</span>                 <span class="n">Processor</span>      <span class="n">Output</span>


                                  <span class="n">DataSource</span>
</pre></div>
</div>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this heading">¶</a></h2>
<p>As inputs are expecting to be working as async agents,
each one is in its own thread (group).
It will put Events onto the InputEventQueue</p>
</section>
<section id="inputeventqueue">
<h2>InputEventQueue<a class="headerlink" href="#inputeventqueue" title="Permalink to this heading">¶</a></h2>
<p>This will be a thread safe queue containing DataClass style messages.
The class of each event will be used to determine which Behaviours will see it.</p>
<p>Events will be consumed by the processor threads, which will offer them out
to Behaviours</p>
</section>
<section id="input-processing-threads">
<h2>Input Processing Threads<a class="headerlink" href="#input-processing-threads" title="Permalink to this heading">¶</a></h2>
<p>This is a processing pool that takes events off the queue.
It will look at the type of the Event, and then offer it to all Behaviours
that support that event time (so, a Behaviour which has a Matcher that
accepts a TwitchMessage won’t need to be called for web hooks or discord
messages etc.)</p>
<p>If there are multiple bots, then they will have their own queue and processor.</p>
<p>Note: When building the bot’s configuration, Behaviours may group themselves
into a BehaviourDispatcher. From the point of view of the ProcessingThread,
this behaves as a single complex Behaviour.
An example use case of this is a large number of distinct plink commands –
the same basic logic is used for a Matcher matching <code class="docutils literal notranslate"><span class="pre">!help</span></code>, <code class="docutils literal notranslate"><span class="pre">!game</span></code>,
and so forth, and these can be combined into one logical operation.</p>
<p>The Processing thread is the thread that handles processing of all the
behaviours in the message. Behaviours MUST NOT do I/O things or async work
except via the DataSource and Logging interfaces, and should put
output events into the output queue.</p>
</section>
<section id="output-event-queue-processor">
<h2>Output Event Queue + Processor<a class="headerlink" href="#output-event-queue-processor" title="Permalink to this heading">¶</a></h2>
<p>Like the input event queue, the queue consists of data only messages,
where the class of the message is indicative of what kind of action is being
taken.</p>
<p>The output processor will match the message type to an output the bot has,
and then attempt to use them in priority order (class heirarachy first, then
by order of definition in the bot). A later output will only be called if
all the ones before it report that they could not process the event.</p>
<p>Two basic built in Outputs are going to be needed: one is a catch all that
logs the failure to send the event, and the other is an outgoing webhook,
which allows the bot to send data to somewhere else on the internet.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">mewbot</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_code_of_conduct.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_contributing.html">CONTRIBUTING.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_contributing.html#contributing">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_contributors.html">CONTRIBUTORS.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_contributors.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_license.html">LICENSE.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_readme.html">README.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="../top_level_md_files/main_readme.html#mewbot">MewBot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html">Welcome to the mewbot docs!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#what-should-go-in-here">What should go in here?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#why-are-there-a-mix-of-md-files-and-rst-files-in-here">Why are there a mix of md files and rst files in here?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#how-do-i-build-this-documentation">How do I build this documentation?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#how-to-i-contribute-to-these-docs">How to I contribute to these docs?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#help-my-doc-changes-are-not-showing-up">Help! My doc changes are not showing up!?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#i-fear-sphinx">I fear sphinx!?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README_DOCS.html#things-to-look-into-later">Things to look into later</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">HAH! COMPLAIN ABOUT LINE 328 DO YOU NOW!?</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data Storage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#inputs">Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inputeventqueue">InputEventQueue</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-processing-threads">Input Processing Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-event-queue-processor">Output Event Queue + Processor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vision.html">Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/mewbot.api.html">mewbot.api package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/mewbot.core.html">mewbot.core package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/mewbot.io.html">mewbot.io package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/mewbot.html">mewbot package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/mewbot.test.html">mewbot.test package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/mewbot.tools.html">mewbot.tools package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source_mewbot/modules.html">mewbot</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../design-docs-index.html">&lt;no title&gt;</a><ul>
      <li>Previous: <a href="data.html" title="previous chapter">Data Storage</a></li>
      <li>Next: <a href="vision.html" title="next chapter">Vision</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Mewler Org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/design-docs/data-flow.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>